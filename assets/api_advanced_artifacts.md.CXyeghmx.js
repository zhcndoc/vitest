import{_ as r,b as n,o as k,i as d,j as a,S as i,g as t,w as o,R as l}from"./chunks/framework.XDTXXE-5.js";const B=JSON.parse('{"title":"Test Artifacts","description":"","frontmatter":{"outline":"deep","title":"Test Artifacts"},"headers":[],"relativePath":"api/advanced/artifacts.md","filePath":"api/advanced/artifacts.md","lastUpdated":1771601921000}'),c={name:"api/advanced/artifacts.md"},g={id:"test-artifacts-4-0-11",tabindex:"-1"},y={id:"recordartifact",tabindex:"-1"},E={id:"testartifactbase",tabindex:"-1"};function F(f,s,A,u,m,b){const h=n("Advanced"),p=n("Version"),e=n("Experimental");return k(),d("div",null,[a("h1",g,[s[1]||(s[1]=i("Test Artifacts ",-1)),t(h),s[2]||(s[2]=i()),t(p,{type:"experimental"},{default:o(()=>[...s[0]||(s[0]=[i("4.0.11",-1)])]),_:1}),s[3]||(s[3]=i()),t(e),s[4]||(s[4]=i()),s[5]||(s[5]=a("a",{class:"header-anchor",href:"#test-artifacts-4-0-11","aria-label":"Permalink to “Test Artifacts  4.0.11”"},"​",-1))]),s[14]||(s[14]=l('<div class="warning custom-block"><p class="custom-block-title custom-block-title-default">WARNING</p><p>This is an advanced API. As a user, you most likely want to use <a href="/guide/test-annotations.html">test annotations</a> to add notes or context to your tests instead. This is primarily used internally and by library authors.</p></div><p>Test artifacts allow attaching or recording structured data, files, or metadata during test execution. This is a low-level feature primarily designed for:</p><ul><li>Internal use (<a href="/guide/test-annotations.html"><code>annotate</code></a> is built on top of the artifact system)</li><li>Framework authors creating custom testing tools on top of Vitest</li></ul><p>Each artifact includes:</p><ul><li>A type discriminator which is a unique identifier for the artifact type</li><li>Custom data, can be any relevant information</li><li>Optional attachments, either files or inline content associated with the artifact</li><li>A source code location indicating where the artifact was created</li></ul><p>Vitest automatically manages attachment serialization (files are copied to <a href="/config/attachmentsdir.html"><code>attachmentsDir</code></a>) and injects source location metadata, so you can focus on the data you want to record. All artifacts <strong>must</strong> extend from <a href="#testartifactbase"><code>TestArtifactBase</code></a> and all attachments from <a href="#testattachment"><code>TestAttachment</code></a> to be correctly handled internally.</p><h2 id="api" tabindex="-1">API <a class="header-anchor" href="#api" aria-label="Permalink to “API”">​</a></h2>',7)),a("h3",y,[s[6]||(s[6]=a("code",null,"recordArtifact",-1)),s[7]||(s[7]=i()),t(e),s[8]||(s[8]=i()),s[9]||(s[9]=a("a",{class:"header-anchor",href:"#recordartifact","aria-label":"Permalink to “recordArtifact”"},"​",-1))]),s[15]||(s[15]=l('<div class="warning custom-block"><p class="custom-block-title custom-block-title-default">WARNING</p><p><code>recordArtifact</code> is an experimental API. Breaking changes might not follow SemVer, please pin Vitest&#39;s version when using it.</p><p>The API surface may change based on feedback. We encourage you to try it out and share your experience with the team.</p></div><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> recordArtifact</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Artifact</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TestArtifact</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">task</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Test</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">artifact</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Artifact</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Artifact</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p>The <code>recordArtifact</code> function records an artifact during test execution and returns it. It expects a <a href="/api/advanced/runner.html#tasks">task</a> as the first parameter and an object assignable to <a href="#testartifact"><code>TestArtifact</code></a> as the second.</p><div class="info custom-block"><p class="custom-block-title custom-block-title-default">INFO</p><p>Artifacts must be recorded before the task is reported. Any artifacts recorded after that will not be included in the task.</p></div><p>When an artifact is recorded on a test, it emits an <code>onTestArtifactRecord</code> runner event and a <a href="/api/advanced/reporters.html#ontestcaseartifactrecord"><code>onTestCaseArtifactRecord</code> reporter event</a>. To retrieve recorded artifacts from a test case, use the <a href="/api/advanced/test-case.html#artifacts"><code>artifacts()</code></a> method.</p><p>Note: annotations, <a href="#relationship-with-annotations">even though they&#39;re built on top of this feature</a>, won&#39;t appear in the <code>task.artifacts</code> array for backwards compatibility reasons until the next major version.</p><h3 id="testartifact" tabindex="-1"><code>TestArtifact</code> <a class="header-anchor" href="#testartifact" aria-label="Permalink to “TestArtifact”">​</a></h3><p>The <code>TestArtifact</code> type is a union containing all artifacts Vitest can produce, including custom ones. All artifacts extend from <a href="#testartifactbase"><code>TestArtifactBase</code></a></p>',8)),a("h3",E,[s[10]||(s[10]=a("code",null,"TestArtifactBase",-1)),s[11]||(s[11]=i()),t(e),s[12]||(s[12]=i()),s[13]||(s[13]=a("a",{class:"header-anchor",href:"#testartifactbase","aria-label":"Permalink to “TestArtifactBase”"},"​",-1))]),s[16]||(s[16]=l(`<div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TestArtifactBase</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  /** File or data attachments associated with this artifact */</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  attachments</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TestAttachment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  /** Source location where this artifact was created */</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  location</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TestArtifactLocation</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>The <code>TestArtifactBase</code> interface is the base for all test artifacts.</p><p>Extend this interface when creating custom test artifacts. Vitest automatically manages the <code>attachments</code> array and injects the <code>location</code> property to indicate where the artifact was created in your test code.</p><div class="danger custom-block"><p class="custom-block-title custom-block-title-default">DANGER</p><p>When running with <a href="/config/api.html#api-allowwrite"><code>api.allowWrite</code></a> or <a href="/config/browser/api.html#api-allowwrite"><code>browser.api.allowWrite</code></a> disabled, Vitest empties the <code>attachments</code> array on every artifact before reporting it.</p><p>If your custom artifact narrows the <code>attachments</code> type (e.g. to a tuple), include <code>| []</code> in the union so the type reflects what actually happens at runtime.</p></div><h3 id="testattachment" tabindex="-1"><code>TestAttachment</code> <a class="header-anchor" href="#testattachment" aria-label="Permalink to “TestAttachment”">​</a></h3><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TestAttachment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  /** MIME type of the attachment (e.g., &#39;image/png&#39;, &#39;text/plain&#39;) */</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  contentType</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  /** File system path to the attachment */</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  path</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  /** Inline attachment content as a string or raw binary data */</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  body</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Uint8Array</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>The <code>TestAttachment</code> interface represents a file or data attachment associated with a test artifact.</p><p>Attachments can be either file-based (via <code>path</code>) or inline content (via <code>body</code>). The <code>contentType</code> helps consumers understand how to interpret the attachment data.</p><h3 id="testartifactlocation" tabindex="-1"><code>TestArtifactLocation</code> <a class="header-anchor" href="#testartifactlocation" aria-label="Permalink to “TestArtifactLocation”">​</a></h3><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TestArtifactLocation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  /** Line number in the source file (1-indexed) */</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  line</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  /** Column number in the line (1-indexed) */</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  column</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  /** Path to the source file */</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  file</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>The <code>TestArtifactLocation</code> interface represents the source code location information for a test artifact. It indicates where in the source code the artifact originated from.</p><h3 id="testartifactregistry" tabindex="-1"><code>TestArtifactRegistry</code> <a class="header-anchor" href="#testartifactregistry" aria-label="Permalink to “TestArtifactRegistry”">​</a></h3><p>The <code>TestArtifactRegistry</code> interface is a registry for custom test artifact types.</p><p>Augmenting this interface using <a href="https://typescriptlang.org/docs/handbook/declaration-merging#module-augmentation" target="_blank" rel="noreferrer">TypeScript&#39;s module augmentation feature</a> allows registering custom artifact types that tests can produce.</p><p>Each custom artifact should extend <a href="#testartifactbase"><code>TestArtifactBase</code></a> and include a unique <code>type</code> discriminator property.</p><p>Here are a few guidelines or best practices to follow:</p><ul><li>Try using a <code>Symbol</code> as the <strong>registry key</strong> to guarantee uniqueness</li><li>The <code>type</code> property should follow the pattern <code>&#39;package-name:artifact-name&#39;</code>, <strong><code>&#39;internal:&#39;</code> is a reserved prefix</strong></li><li>Use <code>attachments</code> to include files or data; extend <a href="#testattachment"><code>TestAttachment</code></a> for custom metadata</li><li>If you narrow the <code>attachments</code> type (e.g. to a tuple), include <code>| []</code> in the union since Vitest may empty the array at runtime (see <a href="#testartifactbase"><code>TestArtifactBase</code></a>)</li><li><code>location</code> property is automatically injected</li></ul><h2 id="custom-artifacts" tabindex="-1">Custom Artifacts <a class="header-anchor" href="#custom-artifacts" aria-label="Permalink to “Custom Artifacts”">​</a></h2><p>To use and manage artifacts in a type-safe manner, you need to create its type and register it:</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { TestArtifactBase, TestAttachment } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vitest&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> A11yReportAttachment</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TestAttachment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  contentType</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;text/html&#39;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  path</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AccessibilityArtifact</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TestArtifactBase</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;a11y:report&#39;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  passed</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> boolean</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  wcagLevel</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;A&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;AA&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;AAA&#39;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  attachments</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">A11yReportAttachment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> []</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> a11yReportKey</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Symbol</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;report&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">declare</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> module</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vitest&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TestArtifactRegistry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    [a11yReportKey]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AccessibilityArtifact</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>As long as the types are assignable to their bases and don&#39;t have errors, everything should work fine and you should be able to record artifacts using <a href="#recordartifact"><code>recordArtifact</code></a>:</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> toBeAccessible</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  this</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MatcherState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  actual</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Element</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  wcagLevel</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;A&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;AA&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;AAA&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;AA&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AsyncExpectationResult</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> report</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> runAccessibilityAudit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(actual, wcagLevel)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> recordArtifact</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.task, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;a11y:report&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    passed: report.violations.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ===</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    wcagLevel,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    attachments: [{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      contentType: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;text/html&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      path: report.path,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  })</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    pass: violations.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ===</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> \`Found \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">report</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">violations</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">} accessibility violation(s)\`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="relationship-with-annotations" tabindex="-1">Relationship with Annotations <a class="header-anchor" href="#relationship-with-annotations" aria-label="Permalink to “Relationship with Annotations”">​</a></h2><p>Test annotations are built on top of the artifact system. When using annotations in tests, they create <code>internal:annotation</code> artifacts under the hood. However, annotations are:</p><ul><li>Simpler to use</li><li>Designed for end-users, not developers</li></ul><p>Use annotations if you just want to add notes to your tests. Use artifacts if you need custom data.</p>`,26))])}const D=r(c,[["render",F]]);export{B as __pageData,D as default};
