import{_ as l,b as o,o as r,i as h,R as n,j as s,S as i,g as t}from"./chunks/framework.XDTXXE-5.js";const m=JSON.parse('{"title":"sequence | Config","description":"","frontmatter":{"title":"sequence | Config","outline":"deep"},"headers":[],"relativePath":"config/sequence.md","filePath":"config/sequence.md","lastUpdated":1771601921000}'),p={name:"config/sequence.md"},c={id:"sequence-sequencer",tabindex:"-1"},d={id:"sequence-seed",tabindex:"-1"};function u(k,e,g,f,E,y){const a=o("CRoot");return r(),h("div",null,[e[6]||(e[6]=n('<h1 id="sequence" tabindex="-1">sequence <a class="header-anchor" href="#sequence" aria-label="Permalink to “sequence”">​</a></h1><ul><li><strong>Type</strong>: <code>{ sequencer?, shuffle?, seed?, hooks?, setupFiles?, groupOrder }</code></li></ul><p>Options for how tests should be sorted.</p><p>You can provide sequence options to CLI with dot notation:</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vitest</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --sequence.shuffle</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --sequence.seed=1000</span></span></code></pre></div>',5)),s("h2",c,[e[0]||(e[0]=i("sequence.sequencer ",-1)),t(a),e[1]||(e[1]=i()),e[2]||(e[2]=s("a",{class:"header-anchor",href:"#sequence-sequencer","aria-label":"Permalink to “sequence.sequencer”"},"​",-1))]),e[7]||(e[7]=n(`<ul><li><strong>Type</strong>: <code>TestSequencerConstructor</code></li><li><strong>Default</strong>: <code>BaseSequencer</code></li></ul><p>A custom class that defines methods for sharding and sorting. You can extend <code>BaseSequencer</code> from <code>vitest/node</code>, if you only need to redefine one of the <code>sort</code> and <code>shard</code> methods, but both should exist.</p><p>Sharding is happening before sorting, and only if <code>--shard</code> option is provided.</p><p>If <a href="#grouporder"><code>sequencer.groupOrder</code></a> is specified, the sequencer will be called once for each group and pool.</p><h2 id="sequence-grouporder" tabindex="-1">sequence.groupOrder <a class="header-anchor" href="#sequence-grouporder" aria-label="Permalink to “sequence.groupOrder”">​</a></h2><ul><li><strong>Type:</strong> <code>number</code></li><li><strong>Default:</strong> <code>0</code></li></ul><p>Controls the order in which this project runs its tests when using multiple <a href="/guide/projects.html">projects</a>.</p><ul><li>Projects with the same group order number will run together, and groups are run from lowest to highest.</li><li>If you don&#39;t set this option, all projects run in parallel.</li><li>If several projects use the same group order, they will run at the same time.</li></ul><p>This setting only affects the order in which projects run, not the order of tests within a project. To control test isolation or the order of tests inside a project, use the <a href="#isolate"><code>isolate</code></a> and <a href="#sequence-sequencer"><code>sequence.sequencer</code></a> options.</p><details class="details custom-block"><summary>Example</summary><p>Consider this example:</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { defineConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vitest/config&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  test: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    projects: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        test: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;slow&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          sequence: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            groupOrder: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        test: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;fast&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          sequence: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            groupOrder: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        test: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;flaky&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          sequence: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            groupOrder: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><p>Tests in these projects will run in this order:</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span> 0. slow  |</span></span>
<span class="line"><span>          |&gt; running together</span></span>
<span class="line"><span> 0. fast  |</span></span>
<span class="line"><span></span></span>
<span class="line"><span> 1. flaky |&gt; runs after slow and fast alone</span></span></code></pre></div></details><h2 id="sequence-shuffle" tabindex="-1">sequence.shuffle <a class="header-anchor" href="#sequence-shuffle" aria-label="Permalink to “sequence.shuffle”">​</a></h2><ul><li><strong>Type</strong>: <code>boolean | { files?, tests? }</code></li><li><strong>Default</strong>: <code>false</code></li><li><strong>CLI</strong>: <code>--sequence.shuffle</code>, <code>--sequence.shuffle=false</code></li></ul><p>If you want files and tests to run randomly, you can enable it with this option, or CLI argument <a href="/guide/cli.html"><code>--sequence.shuffle</code></a>.</p><p>Vitest usually uses cache to sort tests, so long-running tests start earlier, which makes tests run faster. If your files and tests run in random order, you will lose this performance improvement, but it may be useful to track tests that accidentally depend on another test run previously.</p><h3 id="sequence-shuffle-files" tabindex="-1">sequence.shuffle.files <a class="header-anchor" href="#sequence-shuffle-files" aria-label="Permalink to “sequence.shuffle.files”">​</a></h3><ul><li><strong>Type</strong>: <code>boolean</code></li><li><strong>Default</strong>: <code>false</code></li><li><strong>CLI</strong>: <code>--sequence.shuffle.files</code>, <code>--sequence.shuffle.files=false</code></li></ul><p>Whether to randomize files, be aware that long running tests will not start earlier if you enable this option.</p><h3 id="sequence-shuffle-tests" tabindex="-1">sequence.shuffle.tests <a class="header-anchor" href="#sequence-shuffle-tests" aria-label="Permalink to “sequence.shuffle.tests”">​</a></h3><ul><li><strong>Type</strong>: <code>boolean</code></li><li><strong>Default</strong>: <code>false</code></li><li><strong>CLI</strong>: <code>--sequence.shuffle.tests</code>, <code>--sequence.shuffle.tests=false</code></li></ul><p>Whether to randomize tests.</p><h2 id="sequence-concurrent" tabindex="-1">sequence.concurrent <a class="header-anchor" href="#sequence-concurrent" aria-label="Permalink to “sequence.concurrent”">​</a></h2><ul><li><strong>Type</strong>: <code>boolean</code></li><li><strong>Default</strong>: <code>false</code></li><li><strong>CLI</strong>: <code>--sequence.concurrent</code>, <code>--sequence.concurrent=false</code></li></ul><p>If you want tests to run in parallel, you can enable it with this option, or CLI argument <a href="/guide/cli.html"><code>--sequence.concurrent</code></a>.</p><div class="warning custom-block"><p class="custom-block-title custom-block-title-default">WARNING</p><p>When you run tests with <code>sequence.concurrent</code> and <code>expect.requireAssertions</code> set to <code>true</code>, you should use <a href="/guide/test-context.html#expect">local expect</a> instead of the global one. Otherwise, this may cause false negatives in <a href="https://github.com/vitest-dev/vitest/issues/8469" target="_blank" rel="noreferrer">some situations (#8469)</a>.</p></div>`,24)),s("h2",d,[e[3]||(e[3]=i("sequence.seed ",-1)),t(a),e[4]||(e[4]=i()),e[5]||(e[5]=s("a",{class:"header-anchor",href:"#sequence-seed","aria-label":"Permalink to “sequence.seed”"},"​",-1))]),e[8]||(e[8]=n('<ul><li><strong>Type</strong>: <code>number</code></li><li><strong>Default</strong>: <code>Date.now()</code></li><li><strong>CLI</strong>: <code>--sequence.seed=1000</code></li></ul><p>Sets the randomization seed, if tests are running in random order.</p><h2 id="sequence-hooks" tabindex="-1">sequence.hooks <a class="header-anchor" href="#sequence-hooks" aria-label="Permalink to “sequence.hooks”">​</a></h2><ul><li><strong>Type</strong>: <code>&#39;stack&#39; | &#39;list&#39; | &#39;parallel&#39;</code></li><li><strong>Default</strong>: <code>&#39;stack&#39;</code></li><li><strong>CLI</strong>: <code>--sequence.hooks=&lt;value&gt;</code></li></ul><p>Changes the order in which hooks are executed.</p><ul><li><code>stack</code> will order &quot;after&quot; hooks in reverse order, &quot;before&quot; hooks will run in the order they were defined</li><li><code>list</code> will order all hooks in the order they are defined</li><li><code>parallel</code> runs hooks in a single group in parallel (hooks in parent suites still run before the current suite&#39;s hooks). The actual number of simultaneously running hooks is limited by <a href="/config/maxconcurrency.html"><code>maxConcurrency</code></a>.</li></ul><div class="tip custom-block"><p class="custom-block-title custom-block-title-default">TIP</p><p>This option doesn&#39;t affect <a href="/api/hooks.html#ontestfinished"><code>onTestFinished</code></a>. It is always called in reverse order.</p></div><h2 id="sequence-setupfiles" tabindex="-1">sequence.setupFiles <a class="header-anchor" href="#sequence-setupfiles" aria-label="Permalink to “sequence.setupFiles”">​</a></h2><ul><li><strong>Type</strong>: <code>&#39;list&#39; | &#39;parallel&#39;</code></li><li><strong>Default</strong>: <code>&#39;parallel&#39;</code></li><li><strong>CLI</strong>: <code>--sequence.setupFiles=&lt;value&gt;</code></li></ul><p>Changes the order in which setup files are executed.</p><ul><li><code>list</code> will run setup files in the order they are defined</li><li><code>parallel</code> will run setup files in parallel</li></ul>',11))])}const b=l(p,[["render",u]]);export{m as __pageData,b as default};
