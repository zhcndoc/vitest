import{a1 as p,d as k,bE as w,D as S,J as x,v as D,o as L,i as V,k as E,r as m}from"./framework.XDTXXE-5.js";import{u as T}from"./theme.BuCIPd6e.js";let f=!1,l=null;async function F(){return f?!0:l||(l=(async()=>{try{return await p(()=>Promise.resolve({}),[]),f=!0,!0}catch{return console.warn("[VitePress Theme] @docsearch/css not found. If using Algolia search, install: npm install @docsearch/css @docsearch/js"),!1}})(),l)}async function j(){try{return(await p(()=>import("./index.uHKI11e1.js"),[])).default}catch{return console.error("[VitePress Theme] @docsearch/js not found. Install: npm install @docsearch/css @docsearch/js"),null}}const R={key:0,id:"docsearch"},b=k({__name:"VPAlgoliaSearchBox",props:{algolia:{}},setup(n){const u=n,v=w(),{site:g,localeIndex:d,lang:_}=T(),c=m(!0),s=m(!1);let o=null;S(async()=>{if(!await F()){s.value=!0,c.value=!1;return}if(o=await j(),!o){s.value=!0,c.value=!1;return}c.value=!1,h()}),x(d,()=>{!c.value&&!s.value&&h()});async function h(){if(!o)return;await D();const e={...u.algolia,...u.algolia.locales?.[d.value]},a=e.searchParameters?.facetFilters??[],r=[...(Array.isArray(a)?a:[a]).filter(I=>!I.startsWith("lang:")),`lang:${_.value}`],t=e.askAi,i=typeof t=="string",A=t?{indexName:i?e.indexName:t.indexName,apiKey:i?e.apiKey:t.apiKey,appId:i?e.appId:t.appId,assistantId:i?t:t.assistantId,searchParameters:r.length?{facetFilters:r}:void 0}:void 0;y({...e,searchParameters:{...e.searchParameters,facetFilters:r},askAi:A})}function y(e){if(!o){console.error("[VitePress Theme] DocSearch not loaded");return}try{const a=Object.assign({},e,{container:"#docsearch",navigator:{navigate(r){v.go(r.itemUrl)}},transformItems(r){return r.map(t=>Object.assign({},t,{url:P(t.url)}))}});o(a)}catch(a){console.error("[VitePress Theme] Failed to initialize DocSearch:",a),s.value=!0}}function P(e){const{pathname:a,hash:r}=new URL(e,location.origin);return a.replace(/\.html$/,g.value.cleanUrls?"":".html")+r}return(e,a)=>s.value?E("",!0):(L(),V("div",R))}});export{b as default};
